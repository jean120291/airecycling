<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>AI ë¦¬ì‚¬ì´í´ë§</title>

<style>
:root {
  --primary: #22c55e;
  --primary-dark: #16a34a;
  --bg: #f8fafc;
  --card: #ffffff;
  --text: #1e293b;
  --text-light: #64748b;
  --border: #e2e8f0;
  --success: #10b981;
  --shadow: 0 10px 40px rgba(0,0,0,0.08);
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  touch-action: pan-y;
}

header {
  background: white;
  padding: 0.6rem 0.8rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  position: sticky;
  top: 0;
  z-index: 100;
}

.header-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
}

.logo {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 1rem;
  font-weight: 700;
  color: var(--primary);
  white-space: nowrap;
  cursor: pointer;
  transition: transform 0.2s;
}
.logo:hover { transform: translateY(-2px); }

.nav-tabs {
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  flex: 1;
}

.nav-link {
  position: relative;
  font-weight: 700;
  color: var(--text-light);
  padding: 0.5rem 0.25rem;
  cursor: pointer;
  user-select: none;
  transition: color 0.2s;
}

.nav-link:hover { color: var(--text); }
.nav-link.active { color: var(--primary); }
.nav-link::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: -0.5rem;
  height: 3px;
  background: transparent;
  border-radius: 4px;
  transform: scaleX(0);
  transition: transform 0.25s, background 0.25s;
}
.nav-link.active::after {
  background: var(--primary);
  transform: scaleX(1);
}

.header-right {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.location-selector {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  padding: 0.4rem 0.7rem;
  background: var(--bg);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.location-selector select {
  border: none;
  background: none;
  font-size: 0.85rem;
  color: var(--text);
  cursor: pointer;
  outline: none;
  font-weight: 600;
}

.points-pill {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.5rem 0.9rem;
  border-radius: 12px;
  color: #fff;
  background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
  font-weight: 800;
  font-size: 0.9rem;
  box-shadow: 0 0 30px rgba(16,185,129,0.3);
  cursor: pointer;
  transition: transform 0.2s;
}
.points-pill:hover { transform: translateY(-1px); }

main {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
}

.page { display: none; animation: fadeIn 0.3s ease; padding-bottom: 80px; }
.page.active { display: block; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* í™ˆ í˜ì´ì§€ */
.hero {
  text-align: center;
  padding: 2.5rem 1.5rem;
  background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
  border-radius: 20px;
  color: white;
  margin-bottom: 2rem;
  box-shadow: var(--shadow);
}

.hero h1 { font-size: 1.8rem; margin-bottom: 0.8rem; font-weight: 800; line-height: 1.3; }
.hero p { font-size: 1rem; opacity: 0.95; margin-bottom: 1.5rem; }

.cta-button {
  display: inline-flex; align-items: center; gap: 0.5rem;
  padding: 0.9rem 2rem; background: white; color: var(--primary);
  border: none; border-radius: 12px; font-size: 1rem; font-weight: 700;
  cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 4px 20px rgba(0,0,0,0.15);
  touch-action: manipulation;
}
.cta-button:hover, .cta-button:active { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(0,0,0,0.2); }

.section-tabs {
  margin: 1.5rem auto 0;
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  flex-wrap: wrap;
}

.section-tabs .tablink {
  color: rgba(255,255,255,0.8);
  font-weight: 700;
  position: relative;
  padding: 0.4rem 0.25rem;
  cursor: pointer;
  transition: color 0.2s;
}

.section-tabs .tablink:hover { color: white; }
.section-tabs .tablink::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: -0.4rem;
  height: 2px;
  background: transparent;
  transform: scaleX(0);
  transition: transform 0.2s, background 0.2s;
}
.section-tabs .tablink:hover::after {
  background: white;
  transform: scaleX(1);
}

/* í†µê³„ ì„¹ì…˜ */
.stats-section {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem; margin: 2rem 0;
}
.stat-card {
  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
  padding: 1.5rem; border-radius: 16px; text-align: center;
  border: 2px solid #bbf7d0; transition: transform 0.2s;
}
.stat-card:active { transform: scale(0.98); }
.stat-number {
  font-size: 2rem; font-weight: 800; color: var(--primary);
  margin-bottom: 0.5rem;
}
.stat-label { color: var(--text); font-weight: 600; font-size: 0.85rem; line-height: 1.4; }

.features {
  display: grid; grid-template-columns: 1fr;
  gap: 1rem; margin-top: 2rem;
}

.feature-card {
  background: var(--card); padding: 1.5rem; border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05); transition: transform 0.2s, box-shadow 0.2s;
}
.feature-card:active { transform: scale(0.98); box-shadow: 0 2px 8px rgba(0,0,0,0.08); }

.feature-icon {
  width: 56px; height: 56px; background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
  border-radius: 14px; display: flex; align-items: center; justify-content: center;
  font-size: 1.8rem; margin-bottom: 1rem;
}

.feature-card h3 { font-size: 1.2rem; margin-bottom: 0.5rem; color: var(--text); }
.feature-card p { color: var(--text-light); line-height: 1.6; font-size: 0.95rem; }

.info-list {
  list-style: none;
  display: grid;
  gap: 0.75rem;
  margin-top: 1rem;
}

.info-item {
  display: flex;
  gap: 0.75rem;
  align-items: flex-start;
  padding: 0.75rem;
  border-radius: 12px;
  background: var(--bg);
  border: 2px solid var(--border);
}

.info-item .em {
  font-size: 1.5rem;
  width: 28px;
  display: inline-grid;
  place-items: center;
  margin-top: 0.15rem;
  flex-shrink: 0;
}

.info-item strong {
  font-weight: 900;
  display: block;
  margin-bottom: 0.25rem;
}

.info-item p {
  color: var(--text-light);
  line-height: 1.5;
  margin: 0;
  font-size: 0.9rem;
}

/* AI ë¶„ì„ í˜ì´ì§€ */
.analyzer-container { max-width: 100%; margin: 0 auto; }

.upload-section {
  background: var(--card); border-radius: 20px; padding: 1.5rem;
  box-shadow: var(--shadow); text-align: center;
}

.upload-section h2 { font-size: 1.5rem; margin-bottom: 0.8rem; color: var(--text); }
.upload-section p { color: var(--text-light); margin-bottom: 1.5rem; font-size: 0.95rem; }

.upload-zone {
  border: 3px dashed var(--border); border-radius: 16px; padding: 2rem 1rem;
  background: var(--bg); transition: all 0.3s; cursor: pointer; position: relative;
}
.upload-zone:active, .upload-zone.dragover { border-color: var(--primary); background: #f0fdf4; }

.upload-icon { font-size: 3rem; margin-bottom: 0.8rem; opacity: 0.6; }

.upload-zone label {
  display: inline-block; padding: 0.9rem 1.8rem; background: var(--primary);
  color: white; border-radius: 12px; font-weight: 600; cursor: pointer; transition: background 0.2s;
  font-size: 0.95rem; touch-action: manipulation;
}
.upload-zone label:active { background: var(--primary-dark); transform: scale(0.98); }
.upload-zone input { display: none; }

#preview {
  max-width: 100%; max-height: 400px; border-radius: 16px; margin: 1.5rem auto;
  display: none; box-shadow: 0 8px 24px rgba(0,0,0,0.1);
}

#cameraPreview {
  width: 100%; max-height: 400px; border-radius: 16px; margin: 1.5rem auto;
  display: none; box-shadow: 0 8px 24px rgba(0,0,0,0.1);
  object-fit: cover;
}

.camera-controls {
  display: none;
  gap: 1rem;
  margin-top: 1rem;
  justify-content: center;
  flex-wrap: wrap;
}

.camera-controls button {
  padding: 0.9rem 1.8rem;
  border: none;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 0.95rem;
  touch-action: manipulation;
}

.capture-btn {
  background: var(--primary);
  color: white;
}
.capture-btn:active {
  background: var(--primary-dark);
  transform: scale(0.98);
}

.cancel-btn {
  background: var(--bg);
  color: var(--text);
  border: 1px solid var(--border);
}
.cancel-btn:active {
  background: var(--border);
  transform: scale(0.98);
}

#loadingMsg {
  display: none; margin-top: 2rem; padding: 1rem; background: #fef3c7;
  border-radius: 12px; color: #92400e; font-weight: 600;
}

.result-container {
  display: none; margin-top: 1.5rem; background: var(--card);
  border-radius: 20px; padding: 1.5rem; box-shadow: var(--shadow);
}

.result-header {
  display: flex; align-items: center; gap: 1rem; padding: 1.5rem;
  background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
  border-radius: 12px; color: white; margin-bottom: 1.5rem;
}
.result-icon { font-size: 2.5rem; }
.result-header h3 { font-size: 1.5rem; font-weight: 700; }

.probabilities {
  display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1.5rem;
}
.prob-badge {
  padding: 0.5rem 1rem; background: var(--bg); border-radius: 8px;
  font-size: 0.9rem; font-weight: 600; color: var(--text); border: 1px solid var(--border);
}

.guide-box {
  background: #f0fdf4; border-left: 4px solid var(--success);
  padding: 1.5rem; border-radius: 12px; margin-top: 1.5rem;
}
.guide-box h4 {
  color: var(--success); margin-bottom: 0.75rem; display: flex; align-items: center;
  gap: 0.5rem; font-size: 1.1rem;
}
.guide-box p { color: var(--text); line-height: 1.8; }

.back-button {
  display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem;
  background: var(--bg); color: var(--text); border: 1px solid var(--border);
  border-radius: 8px; font-weight: 600; cursor: pointer; margin-top: 1.5rem; transition: all 0.2s;
  touch-action: manipulation;
}
.back-button:active { background: var(--border); transform: scale(0.98); }

/* ë¦¬ì›Œë“œ í˜ì´ì§€ */
.reward-container {
  max-width: 100%;
  margin: 0 auto;
}

.reward-header {
  background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
  padding: 2rem 1.5rem;
  border-radius: 20px;
  color: white;
  text-align: center;
  margin-bottom: 1.5rem;
  box-shadow: var(--shadow);
}

.reward-header h2 {
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
  font-weight: 800;
}

.reward-header p {
  opacity: 0.95;
  font-size: 0.95rem;
}

.points-display {
  background: white;
  border-radius: 16px;
  padding: 2rem 1.5rem;
  text-align: center;
  margin-bottom: 1.5rem;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.points-number {
  font-size: 3rem;
  font-weight: 800;
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.points-label {
  color: var(--text-light);
  font-size: 0.95rem;
}

.rewards-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.reward-item {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  display: flex;
  align-items: center;
  gap: 1rem;
  transition: transform 0.2s;
}

.reward-item:active {
  transform: scale(0.98);
}

.reward-icon {
  width: 56px;
  height: 56px;
  background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8rem;
  flex-shrink: 0;
}

.reward-info {
  flex: 1;
}

.reward-info h3 {
  font-size: 1.1rem;
  margin-bottom: 0.3rem;
  color: var(--text);
}

.reward-info p {
  color: var(--text-light);
  font-size: 0.85rem;
  margin-bottom: 0.5rem;
}

.reward-points {
  color: var(--primary);
  font-weight: 700;
  font-size: 0.95rem;
}

.redeem-btn {
  padding: 0.6rem 1.2rem;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  font-size: 0.85rem;
  cursor: pointer;
  transition: background 0.2s;
  white-space: nowrap;
  touch-action: manipulation;
}

.redeem-btn:active {
  background: var(--primary-dark);
  transform: scale(0.98);
}

.redeem-btn:disabled {
  background: var(--border);
  color: var(--text-light);
  cursor: not-allowed;
  opacity: 0.6;
}

.info-card {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  margin-top: 1.5rem;
}

.info-card h3 {
  font-size: 1.2rem;
  font-weight: 900;
  margin-bottom: 0.75rem;
}

.info-card ul {
  margin-left: 1.25rem;
  display: grid;
  gap: 0.5rem;
}

.info-card li {
  line-height: 1.6;
  color: var(--text-light);
}

/* í€´ì¦ˆ í˜ì´ì§€ */
.quiz-wrap {
  max-width: 100%;
  margin: 0 auto;
}

.quiz-head {
  background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
  padding: 2rem 1.5rem;
  border-radius: 20px;
  color: white;
  text-align: center;
  margin-bottom: 1.5rem;
  box-shadow: var(--shadow);
}

.quiz-head h2 {
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
  font-weight: 800;
}

.quiz-head p {
  opacity: 0.95;
  font-size: 0.95rem;
  font-weight: 600;
}

.quiz-card {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  margin-bottom: 1rem;
}

.q-title {
  font-weight: 900;
  margin-bottom: 1rem;
  font-size: 1.05rem;
  color: var(--text);
}

.opt {
  display: block;
  margin: 0.5rem 0;
  padding: 0.75rem 1rem;
  cursor: pointer;
  border-radius: 8px;
  transition: background 0.2s;
  background: var(--bg);
}

.opt:hover {
  background: #f0fdf4;
}

.opt input {
  margin-right: 0.75rem;
  cursor: pointer;
}

.quiz-actions {
  display: flex;
  gap: 1rem;
  margin-top: 1.5rem;
  align-items: center;
  flex-wrap: wrap;
}

.quiz-result {
  font-weight: 900;
  color: var(--primary);
  font-size: 1.05rem;
}

/* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: white;
  box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
  display: flex;
  justify-content: space-around;
  padding: 0.8rem 0;
  z-index: 100;
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.3rem;
  cursor: pointer;
  padding: 0.5rem 1rem;
  border-radius: 12px;
  transition: background 0.2s;
  touch-action: manipulation;
  flex: 1;
  max-width: 120px;
}

.nav-item:active {
  background: var(--bg);
}

.nav-item.active {
  background: #f0fdf4;
}

.nav-icon {
  font-size: 1.5rem;
}

.nav-label {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-light);
}

.nav-item.active .nav-label {
  color: var(--primary);
}

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
  .hero h1 { font-size: 1.6rem; }
  .hero p { font-size: 0.95rem; }
  main { padding: 1rem; }
  .upload-section { padding: 1.5rem 1rem; }
  .nav-tabs { display: none; }
  .header-right { gap: 0.5rem; }
  .location-selector span { display: none; }
}

@media (min-width: 769px) {
  .bottom-nav { display: none; }
  .page { padding-bottom: 2rem; }
  .features { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
  .rewards-grid { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
  main { padding: 2rem; }
  .hero { padding: 4rem 2rem; }
  .hero h1 { font-size: 2.5rem; }
  .hero p { font-size: 1.2rem; }
}
</style>
</head>

<body>
<header>
  <div class="header-content">
    <div class="logo" onclick="goToHome()">
      <span>â™»ï¸</span>
      <span>AI ë¦¬ì‚¬ì´í´ë§</span>
    </div>
    
    <nav class="nav-tabs">
      <div class="nav-link active" id="tabHome" onclick="goToHome()">í™ˆ</div>
      <div class="nav-link" id="tabAnalyzer" onclick="goToAnalyzer()">ë¶„ì„</div>
      <div class="nav-link" id="tabRewards" onclick="goToRewards()">ë¦¬ì›Œë“œ</div>
      <div class="nav-link" id="tabQuiz" onclick="goToQuiz()">í€´ì¦ˆ</div>
    </nav>
    
    <div class="header-right">
      <div class="location-selector">
        <span>ğŸ“</span>
        <select id="regionSelect">
          <option value="">ì§€ì—­ ì„ íƒ</option>
          <option value="ì„œìš¸">ì„œìš¸íŠ¹ë³„ì‹œ</option>
          <option value="ë¶€ì‚°">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
          <option value="ëŒ€êµ¬">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
          <option value="ê´‘ì£¼">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
          <option value="ì¸ì²œ">ì¸ì²œê´‘ì—­ì‹œ</option>
          <option value="ëŒ€ì „">ëŒ€ì „ê´‘ì—­ì‹œ</option>
          <option value="ìš¸ì‚°">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
          <option value="ì„¸ì¢…">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
          <option value="ê²½ê¸°">ê²½ê¸°ë„</option>
          <option value="ì œì£¼">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
        </select>
      </div>
      <div class="points-pill" onclick="goToRewards()">
        <span>ğŸŒŸ</span>
        <span id="userPoints">0</span>
        <span>P</span>
      </div>
    </div>
  </div>
</header>

<main>
  <!-- í™ˆ í˜ì´ì§€ -->
  <div id="home" class="page active">
    <div class="hero">
      <h1>ğŸŒ AIê°€ ì•Œë ¤ì£¼ëŠ” ì˜¬ë°”ë¥¸ ë¶„ë¦¬ìˆ˜ê±°</h1>
      <p></p>
      <button class="cta-button" onclick="goToAnalyzer()">
        <span>ğŸ“¸</span>
        <span>ì§€ê¸ˆ ì‹œì‘í•˜ê¸°</span>
      </button>
    </div>

    <div class="stats-section">
      <div class="stat-card">
        <div class="stat-number">75%</div>
        <div class="stat-label">ì¬í™œìš© ê°€ëŠ¥ ì“°ë ˆê¸°ê°€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë²„ë ¤ì§</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">30ë¶„</div>
        <div class="stat-label">ì˜¬ë°”ë¥¸ ë¶„ë¦¬ìˆ˜ê±°ë¡œ ì ˆì•½ë˜ëŠ” ì‹œê°„</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">85kg</div>
        <div class="stat-label">ì—°ê°„ 1ì¸ë‹¹ ì¬í™œìš© ê°€ëŠ¥ ì“°ë ˆê¸°ëŸ‰</div>
      </div>
    </div>

    <div class="features">
      <div class="feature-card">
        <div class="feature-icon">âŒ</div>
        <h3>ìì£¼ í‹€ë¦¬ëŠ” ë¶„ë¦¬ìˆ˜ê±°</h3>
        <p>ë§ì€ ì‚¬ëŒë“¤ì´ í—·ê°ˆë ¤í•˜ëŠ” í’ˆëª©ì„ í™•ì¸í•´ë³´ì„¸ìš”</p>
        <ul class="info-list">
          <li class="info-item">
            <span class="em">ğŸ•</span>
            <div>
              <strong>í”¼ìë°•ìŠ¤</strong>
              <p>ê¸°ë¦„ ë¬»ì€ ë¶€ë¶„ì€ ì¼ë°˜ì“°ë ˆê¸°, ê¹¨ë—í•œ ë¶€ë¶„ë§Œ ì¢…ì´ë¥˜</p>
            </div>
          </li>
          <li class="info-item">
            <span class="em">ğŸ§´</span>
            <div>
              <strong>íŒí”„í˜• ìš©ê¸°</strong>
              <p>íŒí”„ëŠ” ì¼ë°˜ì“°ë ˆê¸°, ë³¸ì²´ëŠ” í”Œë¼ìŠ¤í‹±</p>
            </div>
          </li>
          <li class="info-item">
            <span class="em">â˜•</span>
            <div>
              <strong>ì¢…ì´ì»µ</strong>
              <p>ì¢…ì´íŒ©ë¥˜ë¡œ ë¶„ë¦¬</p>
            </div>
          </li>
          <li class="info-item">
            <span class="em">ğŸ¥¤</span>
            <div>
              <strong>ë¹¨ëŒ€</strong>
              <p>ì‚¬ì´ì¦ˆê°€ ì‘ì•„ ì¬í™œìš© ë¶ˆê°€, ì¼ë°˜ì“°ë ˆê¸°</p>
            </div>
          </li>
        </ul>
      </div>

      <div class="feature-card">
        <div class="feature-icon">ğŸ’¡</div>
        <h3>ë¶„ë¦¬ìˆ˜ê±° ê¿€íŒ</h3>
        <p>íš¨ìœ¨ì ì¸ ë¶„ë¦¬ìˆ˜ê±°ë¥¼ ìœ„í•œ ì‹¤ìš© íŒ</p>
        <ul class="info-list">
          <li class="info-item">
            <span class="em">ğŸ·ï¸</span>
            <div>
              <strong>ë¼ë²¨ ì œê±°</strong>
              <p>ë”°ëœ»í•œ ë¬¼ì— ë‹´ê°€ë‘ë©´ ì ‘ì°©ì œê°€ í’€ë ¤ ì‰½ê²Œ ë–¨ì–´ì ¸ìš”</p>
            </div>
          </li>
          <li class="info-item">
            <span class="em">ğŸ“¦</span>
            <div>
              <strong>ì••ì¶•í•˜ê¸°</strong>
              <p>í˜íŠ¸Â·ìº” ì••ì¶• ì‹œ ìˆ˜ê±°/ìš´ë°˜ íš¨ìœ¨â†‘</p>
            </div>
          </li>
          <li class="info-item">
            <span class="em">ğŸ’¦</span>
            <div>
              <strong>í—¹êµ¬ê¸°</strong>
              <p>í•œ ë²ˆë§Œ í—¹ê¶ˆë„ ì•…ì·¨Â·ì´ë¬¼ì§ˆ ê°ì†Œ</p>
            </div>
          </li>
          <li class="info-item">
            <span class="em">ğŸ•—</span>
            <div>
              <strong>ë°°ì¶œ ì‹œê°„</strong>
              <p>ì§€ì—­ ê·œì • ì‹œê°„ì— ë§ì¶° ë°°ì¶œ</p>
            </div>
          </li>
        </ul>
      </div>

      <div class="feature-card">
        <div class="feature-icon">ğŸŒ±</div>
        <h3>í™˜ê²½ ì˜í–¥</h3>
        <p>ì˜¬ë°”ë¥¸ ë¶„ë¦¬ìˆ˜ê±°ê°€ ë§Œë“œëŠ” ë³€í™”</p>
        <ul class="info-list">
          <li class="info-item">
            <span class="em">ğŸŒ³</span>
            <div>
              <strong>ë‚˜ë¬´ ì ˆì•½</strong>
              <p>ì¢…ì´ 1í†¤ ì¬í™œìš© = ë‚˜ë¬´ 17ê·¸ë£¨ ë³´í˜¸</p>
            </div>
          </li>
          <li class="info-item">
            <span class="em">âš¡</span>
            <div>
              <strong>ì—ë„ˆì§€ ì ˆê°</strong>
              <p>í”Œë¼ìŠ¤í‹± ì¬í™œìš© ì‹œ ì›ìœ  ì‚¬ìš©ëŸ‰â†“</p>
            </div>
          </li>
          <li class="info-item">
            <span class="em">ğŸ’§</span>
            <div>
              <strong>ë¬¼ ë³´ì¡´</strong>
              <p>ì‹ ê·œ ìƒì‚° ëŒ€ë¹„ ë¬¼ ì‚¬ìš©â†“</p>
            </div>
          </li>
          <li class="info-item">
            <span class="em">ğŸŒ</span>
            <div>
              <strong>íƒ„ì†Œ ê°ì¶•</strong>
              <p>1kg ì¬í™œìš©ë‹¹ COâ‚‚ ì•½ 2.5kg ê°ì¶•</p>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- AI ë¶„ì„ í˜ì´ì§€ -->
  <div id="analyzer" class="page">
    <div class="analyzer-container">
      <div class="upload-section">
        <h2>ë¶„ë¦¬ìˆ˜ê±° í’ˆëª© ë¶„ì„</h2>
        <p>ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ë©´ AIê°€ í’ˆëª©ê³¼ ê°€ì´ë“œë¥¼ ì œì‹œí•©ë‹ˆë‹¤</p>
        
        <div class="location-selector" style="display: inline-flex; margin-bottom: 1.5rem;">
          <span>ğŸ“</span>
          <select id="analyzerRegionSelect">
            <option value="">ì§€ì—­ ì„ íƒ</option>
            <option value="ì„œìš¸">ì„œìš¸íŠ¹ë³„ì‹œ</option>
            <option value="ë¶€ì‚°">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
            <option value="ëŒ€êµ¬">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
            <option value="ê´‘ì£¼">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
            <option value="ì¸ì²œ">ì¸ì²œê´‘ì—­ì‹œ</option>
            <option value="ëŒ€ì „">ëŒ€ì „ê´‘ì—­ì‹œ</option>
            <option value="ìš¸ì‚°">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
            <option value="ì„¸ì¢…">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
            <option value="ê²½ê¸°">ê²½ê¸°ë„</option>
            <option value="ì œì£¼">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
          </select>
        </div>
        
        <div class="upload-zone" id="uploadZone">
          <div class="upload-icon">ğŸ“·</div>
          <input id="fileInput" type="file" accept="image/*" />
          <label for="fileInput">ì‚¬ì§„ ì„ íƒ</label>
          <p style="margin: 1rem 0 0.5rem 0; color: var(--text-light); font-size: 0.9rem;">
            ë˜ëŠ”
          </p>
          <button class="cta-button" onclick="startCamera()" style="margin-top: 0.5rem;">
            <span>ì¹´ë©”ë¼ë¡œ ì´¬ì˜</span>
          </button>
        </div>

        <video id="cameraPreview" autoplay playsinline></video>
        <div id="cameraControls" class="camera-controls">
          <button class="capture-btn" onclick="capturePhoto()">
            <span>ğŸ“¸</span> ì‚¬ì§„ ì´¬ì˜
          </button>
          <button class="cancel-btn" onclick="stopCamera()">
            ì·¨ì†Œ
          </button>
        </div>

        <img id="preview" alt="ë¯¸ë¦¬ë³´ê¸°"/>
        
        <div id="loadingMsg">
          <span>ğŸ”„</span> AIê°€ ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...
        </div>
      </div>

      <div id="result" class="result-container">
        <div class="result-header">
          <span class="result-icon">âœ…</span>
          <div>
            <h3 id="topLabel">ë¶„ì„ ê²°ê³¼</h3>
            <p id="confidence" style="opacity: 0.9; font-size: 0.95rem; font-weight: 400;"></p>
          </div>
        </div>
        
        <div>
          <h4 style="margin-bottom: 0.75rem; color: var(--text-light); font-size: 0.9rem;">
            ì˜ˆì¸¡ í™•ë¥ 
          </h4>
          <div id="topProbs" class="probabilities"></div>
        </div>

        <div id="guide" class="guide-box"></div>

        <button class="back-button" onclick="resetAnalyzer()">
          <span>â†</span>
          <span>ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</span>
        </button>
      </div>
    </div>
  </div>

  <!-- ë¦¬ì›Œë“œ í˜ì´ì§€ -->
  <div id="rewards" class="page">
    <div class="reward-container">
      <div class="reward-header">
        <h2>ğŸ ë‚˜ì˜ ë¦¬ì›Œë“œ</h2>
        <p>ë¶„ì„ 1íšŒ +5P Â· í€´ì¦ˆ ë³´ë„ˆìŠ¤ ìµœëŒ€ +10P</p>
      </div>

      <div class="points-display">
        <div class="points-number" id="totalPoints">0</div>
        <div class="points-label">ë³´ìœ  í¬ì¸íŠ¸</div>
      </div>

      <div class="rewards-grid" id="rewardsGrid"></div>

      <div class="info-card">
        <h3>â„¹ï¸ ë¦¬ì›Œë“œ ì‚¬ìš© ê°€ì´ë“œ</h3>
        <ul>
          <li><strong>ì ë¦½:</strong> ë¶„ì„ +5P, í€´ì¦ˆ ë³´ë„ˆìŠ¤(ìµœëŒ€ +10P)</li>
          <li><strong>êµí™˜:</strong> ë³´ìœ  í¬ì¸íŠ¸ê°€ ì¶©ì¡±ë˜ë©´ ì¦‰ì‹œ êµí™˜ ê°€ëŠ¥</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- í€´ì¦ˆ í˜ì´ì§€ -->
  <div id="quiz" class="page">
    <div class="quiz-wrap">
      <div class="quiz-head">
        <h2>ğŸ§  ë¶„ë¦¬ìˆ˜ê±° í€´ì¦ˆ</h2>
        <p>ì •ë‹µ 4~5ê°œ: <strong>+10P</strong> Â· ì •ë‹µ 3ê°œ: <strong>+5P</strong> Â· ê·¸ ì™¸ 0P (ì„¸ì…˜ë‹¹ 1íšŒ)</p>
      </div>

      <div id="quizBody">
        <div class="quiz-card">
          <div class="q-title">1) ê¸°ë¦„ì´ ë§ì´ ë¬»ì€ í”¼ìë°•ìŠ¤ëŠ”?</div>
          <label class="opt"><input type="radio" name="q1" value="a"> ì¢…ì´ë¥˜ ë°°ì¶œ</label>
          <label class="opt"><input type="radio" name="q1" value="b"> ì¼ë°˜ì“°ë ˆê¸°</label>
        </div>

        <div class="quiz-card">
          <div class="q-title">2) íŒí”„í˜• ë¡œì…˜ ìš©ê¸° ë¶„ë¦¬ë°°ì¶œ ë°©ë²•ì€?</div>
          <label class="opt"><input type="radio" name="q2" value="a"> íŒí”„ í¬í•¨ í†µì§¸ë¡œ í”Œë¼ìŠ¤í‹±</label>
          <label class="opt"><input type="radio" name="q2" value="b"> íŒí”„ëŠ” ì¼ë°˜ì“°ë ˆê¸°, ë³¸ì²´ëŠ” í”Œë¼ìŠ¤í‹±</label>
        </div>

        <div class="quiz-card">
          <div class="q-title">3) í˜íŠ¸ë³‘ ë¼ë²¨ì€?</div>
          <label class="opt"><input type="radio" name="q3" value="a"> ê·¸ëŒ€ë¡œ ë°°ì¶œ</label>
          <label class="opt"><input type="radio" name="q3" value="b"> ë¼ë²¨ ì œê±° í›„ ì••ì¶•</label>
        </div>

        <div class="quiz-card">
          <div class="q-title">4) ê¹¨ì§„ ìœ ë¦¬ ì¡°ê°ì€?</div>
          <label class="opt"><input type="radio" name="q4" value="a"> ìƒ‰ìƒë³„ë¡œ ë¶„ë¦¬ë°°ì¶œ</label>
          <label class="opt"><input type="radio" name="q4" value="b"> ì‹ ë¬¸ì§€ì— ì‹¸ì„œ ì¼ë°˜ì“°ë ˆê¸°</label>
        </div>

        <div class="quiz-card">
          <div class="q-title">5) ë¹„ë‹ë¥˜ëŠ” ì–´ë–»ê²Œ ë°°ì¶œí• ê¹Œ?</div>
          <label class="opt"><input type="radio" name="q5" value="a"> ë‚´ìš©ë¬¼ ë‚¨ì•„ìˆì–´ë„ ë´‰ì§€ì§¸</label>
          <label class="opt"><input type="radio" name="q5" value="b"> ì´ë¬¼ì§ˆ ì œê±°Â·ì„¸ì²™ í›„ ê±´ì¡°</label>
        </div>

        <div class="quiz-actions">
          <button class="cta-button" onclick="submitQuiz()">ì œì¶œí•˜ê¸°</button>
          <span id="quizMsg" class="quiz-result"></span>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
<div class="bottom-nav">
  <div class="nav-item active" onclick="navigateTo('home')">
    <div class="nav-icon">ğŸ </div>
    <div class="nav-label">í™ˆ</div>
  </div>
  <div class="nav-item" onclick="navigateTo('analyzer')">
    <div class="nav-icon">ğŸ“¸</div>
    <div class="nav-label">ë¶„ì„</div>
  </div>
  <div class="nav-item" onclick="navigateTo('rewards')">
    <div class="nav-icon">ğŸ</div>
    <div class="nav-label">ë¦¬ì›Œë“œ</div>
  </div>
  <div class="nav-item" onclick="navigateTo('quiz')">
    <div class="nav-icon">ğŸ§ </div>
    <div class="nav-label">í€´ì¦ˆ</div>
  </div>
</div>

<!-- TensorFlow.js -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.16.0/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

<script>
// í¬ì¸íŠ¸ ê´€ë¦¬ (ì„¸ì…˜ ê¸°ë°˜)
let userPoints = parseInt(sessionStorage.getItem('userPoints') || '0', 10);

function updatePointUIs() {
  const headerPoints = document.getElementById('userPoints');
  const totalPoints = document.getElementById('totalPoints');
  if (headerPoints) headerPoints.textContent = userPoints;
  if (totalPoints) totalPoints.textContent = userPoints;
}

function addPoints(p) {
  userPoints += p;
  sessionStorage.setItem('userPoints', String(userPoints));
  updatePointUIs();
  updateRedeemButtons();
}

updatePointUIs();

// ì„¸ì…˜ ì¢…ë£Œ ì‹œ ì´ˆê¸°í™”
window.addEventListener('pagehide', e => {
  if (!e.persisted) {
    sessionStorage.removeItem('userPoints');
    sessionStorage.removeItem('quizTaken');
  }
});

// bfcache ë³µì› ì‹œ ì´ˆê¸°í™”
window.addEventListener('pageshow', e => {
  if (e.persisted) {
    sessionStorage.removeItem('userPoints');
    sessionStorage.removeItem('quizTaken');
    userPoints = 0;
    updatePointUIs();
    updateRedeemButtons();
  }
});

// ë„¤ë¹„ê²Œì´ì…˜
function setActive(id) {
  ['tabHome', 'tabAnalyzer', 'tabRewards', 'tabQuiz'].forEach(i => {
    const el = document.getElementById(i);
    if (!el) return;
    if (i === id) el.classList.add('active');
    else el.classList.remove('active');
  });
}

function navigateTo(pageName) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(pageName).classList.add('active');
  
  document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
  event.currentTarget.classList.add('active');
  
  if (pageName === 'rewards') {
    updatePointUIs();
    updateRedeemButtons();
  } else if (pageName === 'analyzer') {
    resetAnalyzer();
  }
  
  window.scrollTo(0, 0);
}

function goToHome() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('home').classList.add('active');
  setActive('tabHome');
  document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
  document.querySelectorAll('.nav-item')[0].classList.add('active');
  window.scrollTo(0, 0);
}

function goToAnalyzer() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('analyzer').classList.add('active');
  setActive('tabAnalyzer');
  document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
  document.querySelectorAll('.nav-item')[1].classList.add('active');
  
  const h = document.getElementById('regionSelect').value;
  const a = document.getElementById('analyzerRegionSelect');
  if (h) a.value = h;
  
  window.scrollTo(0, 0);
}

function goToRewards() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('rewards').classList.add('active');
  setActive('tabRewards');
  document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
  document.querySelectorAll('.nav-item')[2].classList.add('active');
  updatePointUIs();
  updateRedeemButtons();
  window.scrollTo(0, 0);
}

function goToQuiz() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('quiz').classList.add('active');
  setActive('tabQuiz');
  document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
  document.querySelectorAll('.nav-item')[3].classList.add('active');
  window.scrollTo(0, 0);
}

// ì§€ì—­ ì„ íƒ ë™ê¸°í™”
const regionSelect = document.getElementById('regionSelect');
const analyzerRegionSelect = document.getElementById('analyzerRegionSelect');

if (regionSelect && analyzerRegionSelect) {
  regionSelect.addEventListener('change', function() {
    analyzerRegionSelect.value = this.value;
  });
  analyzerRegionSelect.addEventListener('change', function() {
    regionSelect.value = this.value;
  });
}

// ì§€ì—­ë³„ ë¶„ë¦¬ìˆ˜ê±° ê°€ì´ë“œ
const REGION_GUIDES = {
  "ì„œìš¸": {
    "í”Œë¼ìŠ¤í‹±": "ë‚´ìš©ë¬¼ì„ ê¹¨ë—ì´ ë¹„ìš°ê³  í—¹êµ° í›„ ë¼ë²¨ì„ ì œê±°í•˜ì—¬ ì••ì°©í•´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "plastic": "ë‚´ìš©ë¬¼ì„ ê¹¨ë—ì´ ë¹„ìš°ê³  í—¹êµ° í›„ ë¼ë²¨ì„ ì œê±°í•˜ì—¬ ì••ì°©í•´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ì¢…ì´": "í…Œì´í”„, ì² í•€ ë“±ì„ ì œê±°í•˜ê³  ì ‘ì–´ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "paper": "í…Œì´í”„, ì² í•€ ë“±ì„ ì œê±°í•˜ê³  ì ‘ì–´ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ìœ ë¦¬": "ë³‘ëšœê»‘ì„ ì œê±°í•˜ê³  í—¹êµ° í›„ ìƒ‰ìƒë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "glass": "ë³‘ëšœê»‘ì„ ì œê±°í•˜ê³  í—¹êµ° í›„ ìƒ‰ìƒë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ê¸ˆì†": "ìº”ì€ í—¹êµ° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•˜ê³ , ìŠ¤í”„ë ˆì´ëŠ” êµ¬ë©ì„ ëš«ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "metal": "ìº”ì€ í—¹êµ° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•˜ê³ , ìŠ¤í”„ë ˆì´ëŠ” êµ¬ë©ì„ ëš«ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ë¹„ë‹": "ì´ë¬¼ì§ˆì„ ì œê±°í•˜ê³  ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ê±´ì¡° í›„ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "vinyl": "ì´ë¬¼ì§ˆì„ ì œê±°í•˜ê³  ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ê±´ì¡° í›„ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
  },
  "ë¶€ì‚°": {
    "í”Œë¼ìŠ¤í‹±": "ê¹¨ë—ì´ ì„¸ì²™í•œ í›„ ë¼ë²¨ ì œê±° í›„ ë°°ì¶œ. PVCëŠ” ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "plastic": "ê¹¨ë—ì´ ì„¸ì²™í•œ í›„ ë¼ë²¨ ì œê±° í›„ ë°°ì¶œ. PVCëŠ” ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ì¢…ì´": "ë¬¼ê¸°ê°€ ì—†ëŠ” ê¹¨ë—í•œ ì¢…ì´ë§Œ ë°°ì¶œ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
    "paper": "ë¬¼ê¸°ê°€ ì—†ëŠ” ê¹¨ë—í•œ ì¢…ì´ë§Œ ë°°ì¶œ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
    "ìœ ë¦¬": "ëšœê»‘ê³¼ ë¼ë²¨ì„ ì œê±°í•˜ê³  í—¹êµ¬ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "glass": "ëšœê»‘ê³¼ ë¼ë²¨ì„ ì œê±°í•˜ê³  í—¹êµ¬ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ê¸ˆì†": "ìº” ë‚´ë¶€ë¥¼ í—¹êµ¬ê³  ë¼ë²¨ì„ ì œê±°í•˜ì—¬ ì••ì°© ë°°ì¶œí•©ë‹ˆë‹¤.",
    "metal": "ìº” ë‚´ë¶€ë¥¼ í—¹êµ¬ê³  ë¼ë²¨ì„ ì œê±°í•˜ì—¬ ì••ì°© ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ë¹„ë‹": "íˆ¬ëª… ë¹„ë‹ê³¼ ìœ ìƒ‰ ë¹„ë‹ì„ ë¶„ë¦¬í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "vinyl": "íˆ¬ëª… ë¹„ë‹ê³¼ ìœ ìƒ‰ ë¹„ë‹ì„ ë¶„ë¦¬í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
  },
  "ëŒ€êµ¬": {
    "í”Œë¼ìŠ¤í‹±": "ì´ë¬¼ì§ˆ ì œê±° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "plastic": "ì´ë¬¼ì§ˆ ì œê±° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ì¢…ì´íŒ©": "ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  ë¬¼ë¡œ í—¹êµ° ë’¤ ë§ë ¤ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "paper": "ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  ë¬¼ë¡œ í—¹êµ° ë’¤ ë§ë ¤ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ìœ ë¦¬": "ê¹¨ì§„ ìœ ë¦¬ëŠ” ì‹ ë¬¸ì§€ì— ì‹¸ì„œ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "glass": "ê¹¨ì§„ ìœ ë¦¬ëŠ” ì‹ ë¬¸ì§€ì— ì‹¸ì„œ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ê¸ˆì†": "ìº” ì•ˆìª½ì„ ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "metal": "ìº” ì•ˆìª½ì„ ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
  },
  "ê´‘ì£¼": {
    "í”Œë¼ìŠ¤í‹±": "PETì™€ ì¼ë°˜ í”Œë¼ìŠ¤í‹±ì„ êµ¬ë¶„í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "plastic": "PETì™€ ì¼ë°˜ í”Œë¼ìŠ¤í‹±ì„ êµ¬ë¶„í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ì¢…ì´": "ì½”íŒ…ëœ ì¢…ì´ëŠ” ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "paper": "ì½”íŒ…ëœ ì¢…ì´ëŠ” ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ê¸ˆì†": "ìŠ¤í”„ë ˆì´ ìº”ì€ ì™„ì „íˆ ë¹„ìš´ í›„ êµ¬ë©ì„ ëš«ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "metal": "ìŠ¤í”„ë ˆì´ ìº”ì€ ì™„ì „íˆ ë¹„ìš´ í›„ êµ¬ë©ì„ ëš«ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
  },
  "ì¸ì²œ": {
    "í”Œë¼ìŠ¤í‹±": "ë‚´ìš©ë¬¼ ì œê±° í›„ í—¹êµ¬ì–´ ë¼ë²¨ì„ ë–¼ê³  ë°°ì¶œí•©ë‹ˆë‹¤.",
    "plastic": "ë‚´ìš©ë¬¼ ì œê±° í›„ í—¹êµ¬ì–´ ë¼ë²¨ì„ ë–¼ê³  ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ì¢…ì´": "ë°•ìŠ¤ëŠ” í…Œì´í”„ë¥¼ ì œê±°í•˜ê³  í¼ì³ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "paper": "ë°•ìŠ¤ëŠ” í…Œì´í”„ë¥¼ ì œê±°í•˜ê³  í¼ì³ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ìœ ë¦¬": "ë³‘ëšœê»‘ì„ ë¶„ë¦¬í•˜ê³  í—¹êµ¬ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "glass": "ë³‘ëšœê»‘ì„ ë¶„ë¦¬í•˜ê³  í—¹êµ¬ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
  },
  "ëŒ€ì „": {
    "í”Œë¼ìŠ¤í‹±": "ê¹¨ë—ì´ ì„¸ì²™ í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "plastic": "ê¹¨ë—ì´ ì„¸ì²™ í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ì¢…ì´": "ì´ë¬¼ì§ˆì´ ë¬»ì§€ ì•Šì€ ê¹¨ë—í•œ ì¢…ì´ë§Œ ë°°ì¶œ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
    "paper": "ì´ë¬¼ì§ˆì´ ë¬»ì§€ ì•Šì€ ê¹¨ë—í•œ ì¢…ì´ë§Œ ë°°ì¶œ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
    "ê¸ˆì†": "ìº” ë‚´ë¶€ë¥¼ ë¬¼ë¡œ í—¹êµ° í›„ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "metal": "ìº” ë‚´ë¶€ë¥¼ ë¬¼ë¡œ í—¹êµ° í›„ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
  },
  "ìš¸ì‚°": {
    "í”Œë¼ìŠ¤í‹±": "ë¼ë²¨ ì œê±° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "plastic": "ë¼ë²¨ ì œê±° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ì¢…ì´": "ì –ì€ ì¢…ì´ëŠ” ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "paper": "ì –ì€ ì¢…ì´ëŠ” ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ìœ ë¦¬": "ê¹¨ì§„ ìœ ë¦¬ë³‘ì€ ì‹ ë¬¸ì§€ë¡œ ê°ì‹¸ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "glass": "ê¹¨ì§„ ìœ ë¦¬ë³‘ì€ ì‹ ë¬¸ì§€ë¡œ ê°ì‹¸ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
  },
  "ì„¸ì¢…": {
    "í”Œë¼ìŠ¤í‹±": "ì´ë¬¼ì§ˆì„ ì œê±°í•˜ê³  ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "plastic": "ì´ë¬¼ì§ˆì„ ì œê±°í•˜ê³  ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ì¢…ì´": "ì¢…ì´íŒ©ì€ ë”°ë¡œ ëª¨ì•„ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "paper": "ì¢…ì´íŒ©ì€ ë”°ë¡œ ëª¨ì•„ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ê¸ˆì†": "ìº”ë¥˜ëŠ” ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "metal": "ìº”ë¥˜ëŠ” ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
  },
  "ê²½ê¸°": {
    "í”Œë¼ìŠ¤í‹±": "ë‚´ìš©ë¬¼ ì œê±°, ì„¸ì²™ í›„ ë¼ë²¨ ë¶„ë¦¬í•˜ì—¬ ì••ì°© ë°°ì¶œí•©ë‹ˆë‹¤.",
    "plastic": "ë‚´ìš©ë¬¼ ì œê±°, ì„¸ì²™ í›„ ë¼ë²¨ ë¶„ë¦¬í•˜ì—¬ ì••ì°© ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ì¢…ì´": "í…Œì´í”„, ìŠ¤í”„ë§ ë“± ì´ë¬¼ì§ˆ ì œê±° í›„ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "paper": "í…Œì´í”„, ìŠ¤í”„ë§ ë“± ì´ë¬¼ì§ˆ ì œê±° í›„ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ìœ ë¦¬": "ë³‘ëšœê»‘ ë¶„ë¦¬ í›„ ê¹¨ë—ì´ í—¹êµ¬ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "glass": "ë³‘ëšœê»‘ ë¶„ë¦¬ í›„ ê¹¨ë—ì´ í—¹êµ¬ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ê¸ˆì†": "ìº” ì•ˆì„ í—¹êµ° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "metal": "ìº” ì•ˆì„ í—¹êµ° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
  },
  "ì œì£¼": {
    "í”Œë¼ìŠ¤í‹±": "ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ê±´ì¡° í›„ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "plastic": "ê¹¨ë—ì´ ì„¸ì²™í•˜ì—¬ ê±´ì¡° í›„ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ë¹„ë‹": "ì´ë¬¼ì§ˆì„ ì™„ì „íˆ ì œê±°í•˜ê³  ê±´ì¡°í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "vinyl": "ì´ë¬¼ì§ˆì„ ì™„ì „íˆ ì œê±°í•˜ê³  ê±´ì¡°í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ì¢…ì´": "ë¬¼ê¸°ê°€ ì—†ëŠ” ê¹¨ë—í•œ ìƒíƒœë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "paper": "ë¬¼ê¸°ê°€ ì—†ëŠ” ê¹¨ë—í•œ ìƒíƒœë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
    "ìŒì‹ë¬¼": "ë¬¼ê¸°ë¥¼ ìµœëŒ€í•œ ì œê±°í•œ í›„ ì „ìš© ë´‰íˆ¬ì— ë°°ì¶œí•©ë‹ˆë‹¤.",
    "food": "ë¬¼ê¸°ë¥¼ ìµœëŒ€í•œ ì œê±°í•œ í›„ ì „ìš© ë´‰íˆ¬ì— ë°°ì¶œí•©ë‹ˆë‹¤.",
    "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
  }
};

// ê¸°ë³¸ ë°°ì¶œ ê°€ì´ë“œ
const DEFAULT_GUIDES = {
  "í”Œë¼ìŠ¤í‹±": "ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  ê¹¨ë—ì´ í—¹êµ° í›„ ë¼ë²¨ì„ ì œê±°í•˜ì—¬ ì••ì°©í•´ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "plastic": "ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  ê¹¨ë—ì´ í—¹êµ° í›„ ë¼ë²¨ì„ ì œê±°í•˜ì—¬ ì••ì°©í•´ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "ì¢…ì´": "í…Œì´í”„, ì² í•€ ë“±ì˜ ì´ë¬¼ì§ˆì„ ì œê±°í•˜ê³  ì ‘ì–´ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "paper": "í…Œì´í”„, ì² í•€ ë“±ì˜ ì´ë¬¼ì§ˆì„ ì œê±°í•˜ê³  ì ‘ì–´ì„œ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "ìœ ë¦¬": "ë³‘ëšœê»‘ì„ ë¶„ë¦¬í•˜ê³  ë‚´ìš©ë¬¼ì„ ë¹„ìš´ í›„ í—¹êµ¬ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "glass": "ë³‘ëšœê»‘ì„ ë¶„ë¦¬í•˜ê³  ë‚´ìš©ë¬¼ì„ ë¹„ìš´ í›„ í—¹êµ¬ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "ê¸ˆì†": "ìº”ì€ ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  í—¹êµ° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "metal": "ìº”ì€ ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  í—¹êµ° í›„ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "ë¹„ë‹": "ì´ë¬¼ì§ˆì„ ì œê±°í•˜ê³  ê¹¨ë—ì´ ì„¸ì²™í•œ í›„ ê±´ì¡°í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "vinyl": "ì´ë¬¼ì§ˆì„ ì œê±°í•˜ê³  ê¹¨ë—ì´ ì„¸ì²™í•œ í›„ ê±´ì¡°í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "ìŒì‹ë¬¼": "ë¬¼ê¸°ë¥¼ ìµœëŒ€í•œ ì œê±°í•œ í›„ ìŒì‹ë¬¼ ì „ìš© ë´‰íˆ¬ì— ë°°ì¶œí•©ë‹ˆë‹¤.",
  "food": "ë¬¼ê¸°ë¥¼ ìµœëŒ€í•œ ì œê±°í•œ í›„ ìŒì‹ë¬¼ ì „ìš© ë´‰íˆ¬ì— ë°°ì¶œí•©ë‹ˆë‹¤.",
  "ì¼ë°˜ì“°ë ˆê¸°": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤.",
  "trash": "ì¬í™œìš©ì´ ë¶ˆê°€ëŠ¥í•œ í’ˆëª©ì€ ì¼ë°˜ì“°ë ˆê¸°ë¡œ ë°°ì¶œí•©ë‹ˆë‹¤."
};

// AI ëª¨ë¸
const TM_URL = "https://teachablemachine.withgoogle.com/models/ZDrUQugEV/";
let model;

// ì—˜ë¦¬ë¨¼íŠ¸ ì°¸ì¡°
const fileInput = document.getElementById('fileInput');
const preview = document.getElementById('preview');
const resultBox = document.getElementById('result');
const topLabel = document.getElementById('topLabel');
const confidence = document.getElementById('confidence');
const probsBox = document.getElementById('topProbs');
const guideBox = document.getElementById('guide');
const loadingMsg = document.getElementById('loadingMsg');
const uploadZone = document.getElementById('uploadZone');

// ì¹´ë©”ë¼ ê´€ë ¨
const cameraPreview = document.getElementById('cameraPreview');
const cameraControls = document.getElementById('cameraControls');
let currentStream = null;

async function startCamera() {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ 
      video: { facingMode: 'environment' }
    });
    currentStream = stream;
    cameraPreview.srcObject = stream;
    cameraPreview.style.display = 'block';
    cameraControls.style.display = 'flex';
    uploadZone.style.display = 'none';
  } catch (err) {
    alert('ì¹´ë©”ë¼ ì ‘ê·¼ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê¶Œí•œì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
    console.error('ì¹´ë©”ë¼ ì—ëŸ¬:', err);
  }
}

function stopCamera() {
  if (currentStream) {
    currentStream.getTracks().forEach(track => track.stop());
    currentStream = null;
  }
  cameraPreview.style.display = 'none';
  cameraControls.style.display = 'none';
  uploadZone.style.display = 'block';
}

async function capturePhoto() {
  const canvas = document.createElement('canvas');
  canvas.width = cameraPreview.videoWidth;
  canvas.height = cameraPreview.videoHeight;
  const ctx = canvas.getContext('2d');
  ctx.drawImage(cameraPreview, 0, 0);
  
  stopCamera();
  
  canvas.toBlob(async (blob) => {
    const file = new File([blob], 'camera-photo.jpg', { type: 'image/jpeg' });
    await handleFile(file);
  }, 'image/jpeg');
}

function prepareForNewAnalysis() {
  loadingMsg.style.display = 'block';
  resultBox.style.display = 'none';
  topLabel.textContent = 'ë¶„ì„ ì¤‘â€¦';
  confidence.textContent = '';
  probsBox.innerHTML = '';
  guideBox.innerHTML = '';
}

fileInput.addEventListener('click', () => {
  fileInput.value = '';
});

fileInput.addEventListener('change', async (e) => {
  const file = e.target.files?.[0];
  if (file) handleFile(file);
});

uploadZone.addEventListener('dragover', (e) => {
  e.preventDefault();
  uploadZone.classList.add('dragover');
});
uploadZone.addEventListener('dragleave', () => {
  uploadZone.classList.remove('dragover');
});
uploadZone.addEventListener('drop', (e) => {
  e.preventDefault();
  uploadZone.classList.remove('dragover');
  const files = e.dataTransfer.files;
  if (files.length > 0) {
    handleFile(files[0]);
  }
});

async function loadModel() {
  try {
    loadingMsg.style.display = 'block';
    const modelURL = TM_URL + 'model.json';
    const metadataURL = TM_URL + 'metadata.json';
    model = await tmImage.load(modelURL, metadataURL);
  } catch (e) {
    alert('ëª¨ë¸ ë¡œë”© ì‹¤íŒ¨: ' + e);
  } finally {
    loadingMsg.style.display = 'none';
  }
}

async function handleFile(file) {
  prepareForNewAnalysis();

  const url = URL.createObjectURL(file);
  preview.src = url;
  preview.style.display = 'block';

  try {
    if (preview.decode) {
      await preview.decode();
    } else {
      await new Promise((resolve) => {
        preview.onload = () => resolve();
        preview.onerror = () => resolve();
      });
    }
  } catch(_) {}

  if (!model) await loadModel();
  await predict(preview);

  URL.revokeObjectURL(url);
}

async function predict(img) {
  if (!model) return;

  loadingMsg.style.display = 'block';
  resultBox.style.display = 'none';

  const preds = await model.predict(img, false);
  preds.sort((a, b) => b.probability - a.probability);
  const top3 = preds.slice(0, 3);

  loadingMsg.style.display = 'none';
  resultBox.style.display = 'block';

  const mainClass = top3[0].className;
  const mainProb = (top3[0].probability * 100).toFixed(1);

  topLabel.textContent = mainClass;
  confidence.textContent = `ì‹ ë¢°ë„: ${mainProb}%`;

  probsBox.innerHTML = top3.map(p =>
    `<span class="prob-badge">${p.className}: ${(p.probability * 100).toFixed(1)}%</span>`
  ).join('');

  // í¬ì¸íŠ¸ ì¶”ê°€ (ë¶„ì„ 1íšŒë‹¹ 5P)
  addPoints(5);

  // ì§€ì—­ë³„ ê°€ì´ë“œ
  const region = analyzerRegionSelect ? analyzerRegionSelect.value : '';
  let guideText = "";

  if (region && REGION_GUIDES[region] && REGION_GUIDES[region][mainClass]) {
    guideText = REGION_GUIDES[region][mainClass];
  } else if (DEFAULT_GUIDES[mainClass]) {
    guideText = DEFAULT_GUIDES[mainClass];
  } else {
    guideText = "í•´ë‹¹ í’ˆëª©ì˜ ë¶„ë¦¬ë°°ì¶œ ê¸°ì¤€ì„ í™•ì¸í•´ì£¼ì„¸ìš”.";
  }

  const regionText = region ? ` (${region})` : "";
  guideBox.innerHTML = `
    <h4>ğŸ—‘ï¸ ë¶„ë¦¬ë°°ì¶œ ë°©ë²•${regionText}</h4>
    <p>${guideText}</p>
  `;
}

function resetAnalyzer() {
  preview.style.display = 'none';
  resultBox.style.display = 'none';
  fileInput.value = '';
  uploadZone.style.display = 'block';
  stopCamera();
}

// ë¦¬ì›Œë“œ
const REWARDS = [
  {icon:'ğŸŒ³', name:'ë‚˜ë¬´ ì‹¬ê¸° ê¸°ë¶€', cost:1000, desc:'ë‹¹ì‹ ì˜ ì´ë¦„ìœ¼ë¡œ ë‚˜ë¬´ 1ê·¸ë£¨'},
  {icon:'ğŸš‡', name:'ëŒ€ì¤‘êµí†µ ë§ˆì¼ë¦¬ì§€', cost:1000, desc:'êµí†µ ë§ˆì¼ë¦¬ì§€ ì ë¦½'},
  {icon:'ğŸ“¶', name:'ëª¨ë°”ì¼ ë°ì´í„° 1GB', cost:1500, desc:'ëª¨ë°”ì¼ ë°ì´í„° ì¶”ê°€'},
  {icon:'ğŸ«˜', name:'ìº í¼ìŠ¤ ì¹´í˜ 50% 1íšŒ', cost:1500, desc:'ìº í¼ìŠ¤ ì¹´í˜ í• ì¸'},
  {icon:'â˜•', name:'ì¹´í˜ ì•„ë©”ë¦¬ì¹´ë…¸', cost:2000, desc:'ì œíœ´ ì¹´í˜ 1ì”'},
  {icon:'ğŸŸï¸', name:'í™˜ê²½ ì „ì‹œ í‹°ì¼“', cost:2000, desc:'ì „ì‹œ 1ì¸ ì…ì¥'},
  {icon:'ğŸ‘œ', name:'ì—ì½”ë°±', cost:2500, desc:'ì¹œí™˜ê²½ í† íŠ¸ë°±'},
  {icon:'ğŸ«', name:'ì˜í™” í• ì¸ê¶Œ', cost:3000, desc:'ì˜í™” 1ì¸'},
  {icon:'ğŸ¥¤', name:'ë¦¬ìœ ì €ë¸” í…€ë¸”ëŸ¬', cost:4000, desc:'í”Œë¼ìŠ¤í‹± í…€ë¸”ëŸ¬'},
  {icon:'ğŸ›ï¸', name:'í¸ì˜ì  5ì²œì›', cost:5000, desc:'ìƒí’ˆê¶Œ 5,000ì›'}
];

function renderRewards() {
  const grid = document.getElementById('rewardsGrid');
  grid.innerHTML = REWARDS.map(r => `
    <div class="reward-item">
      <div class="reward-icon">${r.icon}</div>
      <div class="reward-info">
        <h3>${r.name}</h3>
        <p>${r.desc}</p>
        <span class="reward-points">${r.cost}P</span>
      </div>
      <button class="redeem-btn" data-cost="${r.cost}" onclick="redeemReward(${r.cost}, '${r.name}')">êµí™˜í•˜ê¸°</button>
    </div>
  `).join('');
}

function updateRedeemButtons() {
  document.querySelectorAll('.redeem-btn').forEach(b => {
    const c = parseInt(b.getAttribute('data-cost') || '0', 10);
    b.disabled = userPoints < c;
  });
}

function redeemReward(cost, name) {
  if (userPoints >= cost) {
    if (confirm(`${name}ì„(ë¥¼) ${cost}Pë¡œ êµí™˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
      addPoints(-cost);
      alert(`ğŸ‰ ${name} êµí™˜ ì™„ë£Œ! ë‚¨ì€ í¬ì¸íŠ¸: ${userPoints}P`);
    }
  } else {
    alert(`í¬ì¸íŠ¸ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.\ní•„ìš”: ${cost}P / ë³´ìœ : ${userPoints}P`);
  }
}

// í€´ì¦ˆ
function submitQuiz() {
  const msg = document.getElementById('quizMsg');
  if (sessionStorage.getItem('quizTaken') === '1') {
    msg.textContent = 'ì´ë¯¸ ì´ë²ˆ ì„¸ì…˜ì—ì„œ í€´ì¦ˆë¥¼ ì™„ë£Œí–ˆì–´ìš”.';
    return;
  }
  
  const ans = { q1: 'b', q2: 'b', q3: 'b', q4: 'b', q5: 'b' };
  let correct = 0;
  
  Object.keys(ans).forEach(k => {
    const v = (document.querySelector(`input[name="${k}"]:checked`) || {}).value;
    if (v === ans[k]) correct++;
  });
  
  let bonus = 0;
  if (correct >= 4) bonus = 10;
  else if (correct === 3) bonus = 5;
  
  if (bonus > 0) {
    addPoints(bonus);
    msg.textContent = `ì •ë‹µ ${correct}/5 ğŸ‰ ë³´ë„ˆìŠ¤ +${bonus}P ì§€ê¸‰!`;
  } else {
    msg.textContent = `ì •ë‹µ ${correct}/5. ë‹¤ìŒì— ë‹¤ì‹œ ë„ì „!`;
  }
  
  sessionStorage.setItem('quizTaken', '1');
}

// ì´ˆê¸°í™”
renderRewards();
updateRedeemButtons();
</script>
</body>
</html>
